<AuthorizeView Roles="Admin,User">
    <Authorized>

        @page "/category/create"
        @attribute [Authorize]
        @inject HttpClient http
        @inject NavigationManager navigation
        @inject JavaScriptService js

        <h2>Nova Categoria</h2>

        <Form CategoryDTO="@categoria" OnValidSubmit="@CriarCategoria" />

        @code {

            CategoryDTO categoria = new CategoryDTO();


        /* O método OnAfterRenderAsync é chamado após o componente ser renderizado */
        protected async override Task OnAfterRenderAsync(bool firstRender)
        {
            if (firstRender)
                await js.FocusById("txtCategoriaNome");
        }


        private async Task CriarCategoria()
        {
            await http.PostAsJsonAsync("api/category", categoria);
            navigation.NavigateTo("categories");
        }
        }
    </Authorized>
    <NotAuthorized>
        <Index />
    </NotAuthorized>
</AuthorizeView>